<mat-drawer-container class="flex flex-col w-full">
    <mat-drawer class="memberdocument_reset_popup dark:bg-gray-900"
                [mode]="'over'"
                [opened]="false"
                [disableClose]="true"
                #drawerOne>

        <!-- Delete single crm document popup -->
        <ng-container *ngIf="DeleteMode">
            <ng-container *ngIf="isSuccess">
                <div class="flex justify-start w-full ng-tns-c188-34 p-5" style="margin-bottom: -2em;">
                    <div>
                        <button    
                                mat-icon-button style="background-color:#ccc; position: fixed; right: 1rem;"
                                [matTooltip]="'Close'"
                                (click)="cancelPopup()">
                            <mat-icon class="text-white"
                                        [svgIcon]="'heroicons_outline:x'"></mat-icon>
                        </button>
                    </div>
                </div>
                <div class="mt-8">
                    <div class="memberdocument_successMessage_scss" *ngIf="successMessage">
                        {{ successMessage }} 
                    </div>
                    <div class="memberdocument_errorMessage_scss" *ngIf="deleteErrorMessage">
                        {{ deleteErrorMessage }} 
                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf="!isSuccess">
                <div class="memberdocument_parent_popup">
                    <div>
                        <div class="memberdocument_delete_scss"> Are you sure want to delete? </div>
                    </div>    
                    <div class="memberdocument_child_btn">
                        <button
                                mat-flat-button
                                [color]="'primary'"
                                [matTooltip]="'Cancel'"
                                (click)="cancelPopup()"
                                >
                            Cancel
                        </button>
    
                        <button
                                mat-flat-button
                                [color]="'primary'"
                                [matTooltip]="'Proceed'"
                                (click)="proceedPopup()"
                                >
                            Proceed
                        </button>
                    </div>
                </div>
            </ng-container>
        </ng-container>
    </mat-drawer>

    <mat-drawer class="w-2/4 dark:bg-gray-900"
                [mode]="'over'"
                [opened]="false"
                [position]="'end'"
                [disableClose]="true"
                #drawerTwo>

        <!-- Generate Voucher Form-->
        <ng-container *ngIf="generateVoucherFormMode">
            <div class="flex justify-start w-full ng-tns-c188-34 p-5" style="margin-bottom: -2em;">
                <div class="">
                    <button mat-icon-button style="background-color:#ccc;"
                            [matTooltip]="'Close'"
                            (click)="closeGenerateVoucherForm()">
                        <mat-icon class="text-white"
                                  [svgIcon]="'heroicons_outline:x'"></mat-icon>
                    </button>
                </div>
                <div class="w-full text-3xl font-bold" style="text-align:center;">Generate Voucher</div>
            </div>

            <div class="flex-auto p-5">
                <form [formGroup]="GenerateVoucherForm">

                    <div class="mt-8 hidden">
                        <mat-form-field class="fuse-mat-no-subscript w-full">
                            <mat-label>id</mat-label>
                            <input matInput
                                   [formControlName]="'id'"
                                   [placeholder]="'id'">
                        </mat-form-field>
                    </div>

                    <div class="mt-8">
                        <mat-form-field class="fuse-mat-no-subscript w-full">
                            <mat-label>Available Points</mat-label>
                            <input matInput type="number"
                                   id = "available_points"
                                   [readonly]="true"
                                   [formControlName]="'available_points'"
                                   [placeholder]="'Available Points'">
                        </mat-form-field>
                    </div>

                    <div class="mt-8">
                        <mat-form-field class="fuse-mat-no-subscript w-full">
                            <mat-label>Points to Convert</mat-label>
                            <mat-icon matPrefix
                                      class="hidden sm:flex icon-size-5"
                                      [svgIcon]="'heroicons_outline:currency-dollar'"></mat-icon>
                            <input matInput id="points_used"
                                   [(ngModel)]="inputPointValue"
                                   [formControlName]="'points_used'"
                                   [placeholder]="'Points to Convert'"
                                   (input)="openGernerateVoucherForm()">
                        </mat-form-field>
                    </div>

                    <div class="mt-8">
                        <mat-form-field class="fuse-mat-no-subscript w-full">
                            <mat-label>Points Value</mat-label>
                            <!-- <mat-icon matPrefix
                                      class="hidden sm:flex icon-size-5"
                                      [svgIcon]="'heroicons_outline:currency-dollar'"></mat-icon> -->
                            <input matInput type="number"
                                   [readonly]="true"
                                   [(ngModel)]="getPointConversionRate"
                                   [formControlName]="'conversion_rate'"
                                   [placeholder]="'Points Value'"
                                   (input)="openGernerateVoucherForm()">
                        </mat-form-field>
                    </div>

                    <div class="mt-8">
                        <mat-form-field class="fuse-mat-no-subscript w-full">
                            <mat-label>Voucher Amount</mat-label>
                            <!-- <mat-icon matPrefix
                                      class="hidden sm:flex icon-size-5"
                                      [svgIcon]="'heroicons_outline:currency-dollar'"></mat-icon> -->
                            <input matInput type="number"
                                   [readonly]="true"
                                   [formControlName]="'amount'"
                                   [placeholder]="'Voucher Amount'">
                        </mat-form-field>
                    </div>

                    <div class="flex items-center mt-10 -mx-6 sm:-mx-12 py-4 pr-4 pl-1 sm:pr-12 sm:pl-7 border-t bg-gray-50 dark:bg-transparent">
                        <button class="ml-2" style="width: 6rem;"
                                mat-flat-button
                                [disabled]="GenerateVoucherForm.invalid || GenerateVoucherForm.get('available_points').value === 0 || GenerateVoucherForm.get('points_used').value === 0"
                                [color]="'primary'"
                                [matTooltip]="'Save'"
                                (click)="createGenerateVoucher()">
                            Save
                        </button>

                        <div *ngIf="GenerateVoucherForm.get('points_used').errors && GenerateVoucherForm.get('points_used').errors.max" class="text_danger">
                            Maximum points allowed: {{ getAvailablePoints }}
                        </div>

                        <div *ngIf="voucherErrorMessage" class="text_danger">
                            {{ voucherErrorMessage }}
                        </div>

                        <div *ngIf="createGeneateVoucherSuccessfully" class="success_text_danger">
                            {{ createGeneateVoucherSuccessfully }}
                        </div>
                       
                    </div>
                </form>
            </div>
        </ng-container>
    </mat-drawer>

    <mat-drawer-content>
        <div class="flex flex-col w-full" style="background:#fff;">

            <!-- View mode -->
            <ng-container *ngIf="!editMode && !pointlistMode && !transactionlistMode && !pointDetailViewMode && !pointDetailEditMode && !pointDetailAddMode && !transactionDetailMode">
                <!-- Header -->
                <div class="relative w-full px-8 sm:px-12 bg-accent-100 dark:bg-accent-700">
                    <!-- Close button -->
                    <div class="flex items-center justify-end w-full max-w-4xl mx-auto pt-6">
                        <button mat-icon-button
                                [matTooltip]="'Close'"
                                [routerLink]="['../']"
                                (click)="closeDrawer()" style="background:gray;">
                            <mat-icon class="text-white"
                                      [svgIcon]="'heroicons_outline:x'"></mat-icon>
                        </button>
                    </div>
                </div>
        
                <!-- member -->
                <div class="relative flex flex-col flex-auto items-center p-6 pt-0 sm:p-12 sm:pt-0">
                    <div class="w-full max-w-4xl">
                        <!-- Avatar and actions -->
                        <div class="flex flex-auto items-end py-5 -mt-16">
                            <!-- Avatar -->
                            <div class="flex items-center justify-center w-32 h-32 rounded-full overflow-hidden ring-4 ring-bg-card">
                                <div class="flex items-center justify-center w-full h-full rounded overflow-hidden uppercase text-8xl font-bold leading-none bg-gray-200 text-gray-600 dark:bg-gray-700 dark:text-gray-200">
                                    <!-- {{member.member[0].first_name.charAt(0)}} -->
                                    <ng-container *ngIf="member.member[0].gender.toLowerCase() === 'male'">
                                        <mat-icon svgIcon="mat_outline:male" class="icon_image__size"></mat-icon>
                                    </ng-container>
                                    <ng-container *ngIf="member.member[0].gender.toLowerCase() === 'female'">
                                        <mat-icon svgIcon="mat_outline:female" class="icon_image__size"></mat-icon>
                                    </ng-container>
                                </div>
                            </div>
                            <!-- Actions -->
                            <div class="flex items-center h-20 ml-5 mb-1">
                                <ng-container *ngIf="canEdit">
                                    <button mat-stroked-button
                                        (click)="toggleEditMode(true)">
                                        <mat-icon class="icon-size-5"
                                                [svgIcon]="'heroicons_solid:pencil-alt'"></mat-icon>
                                        <span class="ml-2">Edit</span>
                                    </button>
                                </ng-container>
                            </div>

                            <div class="flex imageCode">
                                <img class="base64QrCodeImageData" *ngIf="qrCodeImageData" [src]="qrCodeImageData" alt="QRCode Base64 Image">
                                <img class="base64BarCodeImageData" *ngIf="barCodeImageData" [src]="barCodeImageData" alt="BarCode Base64 Image">
                            </div>
                        </div>

                        <div class="grid grid-cols-2">
                            <!-- Name -->
                            <div class="text-4xl font-bold" style="word-break: break-word;white-space: normal;">
                                {{member.member[0].first_name}} {{member.member[0].last_name}}
                                <ng-container *ngIf="member.member[0].gender.toLowerCase() === 'male'">
                                    <!-- <mat-icon svgIcon="mat_outline:male"></mat-icon> -->
                                </ng-container>
                                <ng-container *ngIf="member.member[0].gender.toLowerCase() === 'female'">
                                    <!-- <mat-icon svgIcon="mat_outline:female"></mat-icon> -->
                                </ng-container>
                            </div>
                            <div class="gap-5">
                                <!--<div class="text-2xl font-bold bg-blue-100 text-left rounded-full py-3 px-6"> <mat-icon [svgIcon]="'heroicons_outline:sparkles'"></mat-icon> Repeat Purchasers </div>-->
                                <ng-container *ngIf="member.member[0].member_tier !== null">
                                    <div class="text-2xl font-bold bg-blue-100 text-left rounded-full py-3 px-6"> <mat-icon [svgIcon]="'heroicons_outline:academic-cap'"></mat-icon> {{member.member[0].member_tier.name}} </div>
                                </ng-container>
                            </div>
                        </div>
                    </div>
        
                    <div class="w-full grid memberdetail-grid gap-6 mt-4 pt-5 border-t">
                        <div class="bg-card shadow rounded-2xl">
                            <div class="flex p-2">
                                <mat-icon svgIcon="heroicons_solid:information-circle"></mat-icon>
                                <div class="font-bold ml-2 leading-6 text-2xl">Basic Information</div>
                            </div>
        
                            <ng-container *ngIf="member.member[0].member_code">
                                <div class="flex p-2">
                                    <mat-icon [svgIcon]="'mat_solid:card_membership'" class="icon-size-5"></mat-icon>
                                    <div class="font-bold ml-2 leading-6 w-2/4">  Member Code : </div>
                                    <div class="ml-2 leading-6 w-3/4">{{member.member[0].member_code}}</div>
                                </div>
                            </ng-container>
        
                            <ng-container *ngIf="member.member[0].referral_code">
                                <div class="flex p-2">
                                    <mat-icon [svgIcon]="'mat_solid:queue_play_next'" class="icon-size-5"></mat-icon>
                                    <div class="font-bold ml-2 leading-6 w-2/4">  Referral Code : </div>
                                    <div class="ml-2 leading-6 w-3/4">{{member.member[0].referral_code}}</div>
                                </div>
                            </ng-container>
        
                            <ng-container *ngIf="member.member[0].card_no">
                                <div class="flex p-2">
                                    <mat-icon [svgIcon]="'heroicons_outline:credit-card'" class="icon-size-5"></mat-icon>
                                    <div class="font-bold ml-2 leading-6 w-2/4">  Card No : </div>
                                    <div class="ml-2 leading-6 w-3/4">{{member.member[0].card_no}}</div>
                                </div>
                            </ng-container>
        
                            <ng-container *ngIf="member.member[0].mobile_phone">
                                <div class="flex p-2">
                                    <mat-icon [svgIcon]="'mat_solid:phone'" class="icon-size-5"></mat-icon>
                                    <div class="font-bold ml-2 leading-6 w-2/4">  Mobile Phone : </div>
                                    <div class="ml-2 leading-6 w-3/4">{{member.member[0].mobile_phone}}</div>
                                </div>
                            </ng-container>
        
                            <ng-container *ngIf="member.member[0].email">
                                <div class="flex p-2">
                                    <mat-icon [svgIcon]="'mat_solid:mail'" class="icon-size-5"></mat-icon>
                                    <div class="font-bold ml-2 leading-6 w-2/4">  Email : </div>
                                    <div class="ml-2 leading-6 w-3/4">{{member.member[0].email}}</div>
                                </div>
                            </ng-container>
        
                            <ng-container *ngIf="member.member[0].date_of_birth">
                                <div class="flex p-2">
                                    <mat-icon [svgIcon]="'mat_solid:cake'" class="icon-size-5"></mat-icon>
                                    <div class="font-bold ml-2 leading-6 w-2/4">  Birthday : </div>
                                    <div class="ml-2 leading-6 w-3/4">{{member.member[0].date_of_birth | date:'MMM dd, y'}}</div>
                                </div>
                            </ng-container>
        
                            <ng-container *ngIf="member.member[0].gender">
                                <div class="flex p-2">
                                    <ng-container *ngIf="member.member[0].gender.toLowerCase() === 'male' || member.member[0].gender === '1'">
                                        <mat-icon svgIcon="mat_solid:male" class="icon-size-5"></mat-icon>
                                    </ng-container>
                                    <ng-container *ngIf="member.member[0].gender.toLowerCase() === 'female' || member.member[0].gender === '2'">
                                        <mat-icon svgIcon="mat_solid:female" class="icon-size-5"></mat-icon>
                                    </ng-container>
                                    <div class="font-bold ml-2 leading-6 w-2/4">  Gender : </div>
                                    <div class="ml-2 leading-6 w-3/4">{{member.member[0].gender}}</div>
                                </div>
                            </ng-container>
                            <ng-container *ngIf="member.member[0].accept_email">
                                <div class="flex p-2">
                                    <mat-icon svgIcon="heroicons_solid:mail-open" class="icon-size-5"></mat-icon>
                                    <div class="font-bold ml-2 leading-6 w-2/4">  Allow Email : </div>
                                    <ng-container *ngIf="member.member[0].accept_email === true">
                                        <div class="ml-2 leading-6 w-3/4">Yes</div>
                                    </ng-container>
                                    <ng-container *ngIf="member.member[0].accept_email === false">
                                        <div class="ml-2 leading-6 w-3/4">No</div>
                                    </ng-container>
        
                                </div>
                            </ng-container>
                            <ng-container *ngIf="member.member[0].accept_mobile_sms">
                                <div class="flex p-2">
                                    <mat-icon svgIcon="heroicons_solid:chat-alt" class="icon-size-5"></mat-icon>
                                    <div class="font-bold ml-2 leading-6 w-2/4">  Allow SMS : </div>
                                    <ng-container *ngIf="member.member[0].accept_mobile_sms === true">
                                        <div class="ml-2 leading-6 w-3/4">Yes</div>
                                    </ng-container>
                                    <ng-container *ngIf="member.member[0].accept_mobile_sms === false">
                                        <div class="ml-2 leading-6 w-3/4">No</div>
                                    </ng-container>
                                </div>
                            </ng-container>
        
                            <ng-container *ngIf="member.member[0].registration_date">
                                <div class="flex p-2">
                                    <mat-icon svgIcon="heroicons_solid:clipboard-check" class="icon-size-5"></mat-icon>
                                    <div class="font-bold ml-2 leading-6 w-2/4">  Registeration Date : </div>
                                    <div class="ml-2 leading-6 w-3/4">{{member.member[0].registration_date | date:'MMM dd, y'}}</div>
                                </div>
                            </ng-container>
        
                            <ng-container *ngIf="member.member[0].registration_channel">
                                <div class="flex p-2">
                                    <mat-icon svgIcon="heroicons_solid:server" class="icon-size-5"></mat-icon>
                                    <div class="font-bold ml-2 leading-6 w-2/4">  Registeration Channel : </div>
                                    <div class="ml-2 leading-6 w-3/4">{{member.member[0].registration_channel}}</div>
                                </div>
                            </ng-container>
        
                            <ng-container *ngIf="member.member[0].store">
                                <div class="flex p-2">
                                    <mat-icon svgIcon="heroicons_solid:library" class="icon-size-5"></mat-icon>
                                    <div class="font-bold ml-2 leading-6 w-2/4">  Store : </div>
                                    <div class="ml-2 leading-6 w-3/4">{{member.member[0].store}}</div>
                                </div>
                            </ng-container>
                        </div>
        
                        <div class="flex flex-col flex-auto ">
                            <!-- Earning Row -->
                            <div class="fpx-5 bg-card overflow-hidden" style="margin-bottom:10px; margin-bottom:10px;padding:1px;">
                                <div class="fpx-5 bg-card shadow rounded-2xl overflow-hidden" style="margin-bottom:10px;width:48%;height:100%;float:left">
                                    <div class="flex items-start justify-between">
                                        <div class="text-lg font-medium tracking-tight leading-6 truncate"></div>
                                        <div class="ml-2 -mt-2 -mr-3">
                                        </div>
                                    </div>
                                    <div class="flex flex-col items-center mt-2 h-40">
                                        <div class="text-7xl sm:text-4xl font-bold tracking-tight leading-none text-blue-500">{{member.spending.totalPoint}}</div>
                                        <div class="text-lg font-medium text-blue-600 dark:text-blue-500">Current/Redeemable Points</div>
                                        <ng-container *ngIf="member.soonExpiredPoint.soonExpiredPoints > 0">
                                            <div class="items-baseline justify-center w-full mt-3 text-secondary">
                                                <div class="flex justify-center truncate w-full font-bold" style="font-size: 14px;">Points to expire soon</div>
                                                <div class="font-medium flex justify-center truncate" style="font-size: 12px;">Expire Points:
                                                    <ng-container *ngIf="member.soonExpiredPoint.soonExpiredPoints > 0">
                                                        <div class="ml-1.5 font-semibold" style="font-size: 12px;">{{member.soonExpiredPoint.soonExpiredPoints}}</div>
                                                    </ng-container>
                                                </div>
                                                
                                                <ng-container *ngIf="member.soonExpiredPoint.soonExpiredPoints === 0">
                                                    <div class="ml-1.5 font-semibold">-</div>
                                                </ng-container>
                                            </div>
                                            <div class="flex items-baseline justify-center w-full text-secondary">
                                                <div class="font-medium truncate" style="font-size: 12px;">Expire Date:</div>
                                                <ng-container *ngIf="member.soonExpiredPoint.soonExpiredPoints > 0">
                                                    <div class="ml-1.5 font-semibold" style="font-size: 12px;">{{member.soonExpiredPoint.soonExpiredDate | date:'MMM dd, yyyy'}}</div>
                                                </ng-container>
                                                <ng-container *ngIf="member.soonExpiredPoint.soonExpiredPoints === 0">
                                                    <div class="ml-1.5 font-semibold">-</div>
                                                </ng-container>
                                            </div>
                                        </ng-container>
                                        
                                        <ng-container *ngIf="canEdit">
                                            <div style="margin-top: 0px !important;" >
                                                <div class="flex w-full ">
                                                    <button class="w-1/8"
                                                        mat-stroked-button
                                                        (click)="openGernerateVoucherForm()">
                                                        Generate Voucher
                                                    </button>
                                                </div>
                                            </div>
                                        </ng-container>
                                    </div>
                                </div>
                                <div class="fpx-5 bg-card shadow rounded-2xl overflow-hidden" style="margin-bottom:10px;width:50%;height:100%;float:right">
                                    <div class="flex items-start justify-between">
                                        <div class="text-lg font-medium tracking-tight leading-6 truncate"></div>
                                        <div class="ml-2 -mt-2 -mr-3">
                                        </div>
                                    </div>
                                    <div class="flex flex-col items-center mt-2 h-40">
                                        <div class="text-7xl sm:text-4xl font-bold tracking-tight leading-none text-blue-500">${{member.spending.dollerValueSpending | number : '1.2-2'}}</div>
                                        <div class="text-lg font-medium text-blue-600 dark:text-blue-500">Current/Redeemable Dollar</div>
                                        <ng-container *ngIf="member.soonExpiredPoint.soonExpiredDollars > 0">
                                            <div class="items-baseline justify-center w-full mt-3 text-secondary">
                                                <div class="flex justify-center truncate w-full font-bold" style="font-size: 14px;">Dollars to expire soon</div>
                                                <div class="text-md font-medium flex justify-center truncate" style="font-size: 12px;">Expire Dollars:
                                                    <ng-container *ngIf="member.soonExpiredPoint.soonExpiredDollars > 0">
                                                        <div class="ml-1.5 font-semibold" style="font-size: 12px;">${{member.soonExpiredPoint.soonExpiredDollars}}</div>
                                                    </ng-container>
                                                    <ng-container *ngIf="member.soonExpiredPoint.soonExpiredDollars === 0">
                                                        <div class="ml-1.5 font-semibold">-</div>
                                                    </ng-container>
                                                </div>
                                            </div>
                                            <div class="flex items-baseline justify-center w-full text-secondary">
                                                <div class="text-md font-medium truncate" style="font-size: 12px;">Expire Date:</div>
                                                    <ng-container *ngIf="member.soonExpiredPoint.soonExpiredDollars > 0">
                                                        <div class="ml-1.5 font-semibold" style="font-size: 12px;">{{member.soonExpiredPoint.soonExpiredDate | date:'MMM dd, y'}}</div>
                                                    </ng-container>
                                                    <ng-container *ngIf="member.soonExpiredPoint.soonExpiredDollars === 0">
                                                        <div class="ml-1.5 font-semibold">-</div>
                                                    </ng-container>
                                            </div>
                                        </ng-container>
                                    </div>
                                </div>
                            </div>
        
                            <!-- Dollar Row -->
                            <div class="bg-card overflow-hidden" style="margin-bottom:10px; margin-bottom:10px;padding:1px;">
                                <div class="bg-card shadow rounded-2xl overflow-hidden" style="margin-bottom:10px;width:48%;height:100%;float:left">
                                    <div class="flex items-start justify-between">
                                        <div class="text-lg font-medium tracking-tight leading-6 truncate"></div>
                                        <div class="ml-2 -mt-2 -mr-3">
                                        </div>
                                    </div>
                                    <div class="flex flex-col items-center justify-center h-30">
                                        <div class="flex flex-col items-center">
                                            <div class="text-7xl sm:text-4xl font-bold tracking-tight leading-none text-blue-500">{{ ((member.earning.redeemTotalPoint) ? member.earning.redeemTotalPoint : 0)}}</div>
                                            <div class="text-lg font-medium text-blue-600 dark:text-blue-500">Total Redeemed Points</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-card shadow rounded-2xl overflow-hidden" style="margin-bottom:10px;width:50%;height:100%;float:right">
                                    <div class="flex items-start justify-between">
                                        <div class="text-lg font-medium tracking-tight leading-6 truncate"></div>
                                        <div class="ml-2 -mt-2 -mr-3">
                                        </div>
                                    </div>
        
                                    <div class="flex flex-col items-center justify-center h-30">
                                        <div class="flex flex-col items-center">
                                            <div class="text-7xl sm:text-4xl font-bold tracking-tight leading-none text-blue-500">${{member.earning.dollerValueRedeem | number : '1.2-2'}} </div>
                                            <div class="text-lg font-medium text-blue-600 dark:text-blue-500">Total Redeemed Dollars</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
        
                            <!--Expire Row -->
                            <div class="bg-card overflow-hidden" style="padding:1px;">
                                <div class="bg-card shadow rounded-2xl overflow-hidden" style="width:48%;float:left">
                                    <div class="flex items-start justify-between">
                                        <div class="text-lg font-medium tracking-tight leading-6 truncate"></div>
                                        <div class="ml-2 -mt-2 -mr-3">
                                        </div>
                                    </div>
                                    <div class="flex flex-col items-center justify-center h-30">
                                        <div class="flex flex-col items-center">
                                            <!-- <div class="text-7xl sm:text-4xl font-bold tracking-tight leading-none text-blue-500">{{ ((member.spending.expiredTotalPoints) ? member.earning.expiredTotalPoints : 0)}}</div> -->
                                            <div class="text-7xl sm:text-4xl font-bold tracking-tight leading-none text-blue-500">{{((member.spending.expiredTotalPoints))}}</div>
                                            <div class="text-lg font-medium text-blue-600 dark:text-blue-500">Total Expired Points</div>
                                        </div>
                                    </div>
                                </div>
                                <div class="bg-card shadow rounded-2xl overflow-hidden" style="width:50%;float:right">
                                    <div class="flex items-start justify-between">
                                        <div class="text-lg font-medium tracking-tight leading-6 truncate"></div>
                                        <div class="ml-2 -mt-2 -mr-3">
                                        </div>
                                    </div>
        
                                    <div class="flex flex-col items-center justify-center h-30">
                                        <div class="flex flex-col items-center">
                                            <div class="text-7xl sm:text-4xl font-bold tracking-tight leading-none text-blue-500">${{member.spending.dollerValueSpendingExpired | number : '1.2-2'}} </div>
                                            <div class="text-lg font-medium text-blue-600 dark:text-blue-500">Total Expired Dollars</div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
        
                        <!-- Recent member points table -->
                        <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                            <div class="p-6">
                                <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate">Recent Member Points</div>
                            </div>
                            <div class="overflow-x-auto mx-6">
                                <table class="w-full bg-transparent"
                                       mat-table
                                       matSort
                                       [dataSource]="recentPointsDataSource"
                                       [trackBy]="trackByFn"
                                       #recentPointsTable>
        
                                    <!-- Document No. -->
                                    <ng-container matColumnDef="transaction_document_no">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0; white-space: nowrap; padding-right: 0.3rem;">
                                            Document No
                                        </th>
                                        <td mat-cell [routerLink]="['./memberpoint', point.id]" style="cursor:pointer;"
                                            *matCellDef="let point">
                                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                {{point.transaction_document_no}}
                                            </span>
                                        </td>
                                    </ng-container>
                                     
                                    <!-- Point Type -->
                                    <ng-container matColumnDef="point_type">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Point Type
                                        </th>
                                        <td mat-cell [routerLink]="['./memberpoint', point.id]" style="cursor:pointer;"
                                            *matCellDef="let point">
                                            <span class="pr-6 whitespace-nowrap" style="text-transform:capitalize;">
                                                {{point.point_type}}
                                            </span>
                                        </td>
                                    </ng-container>
        
                                    <!-- Point -->
                                    <ng-container matColumnDef="point">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0; white-space: nowrap; padding-right: 0.3rem;">
                                            Total Points
                                        </th>
                                        <td mat-cell [routerLink]="['./memberpoint', point.id]" style="cursor:pointer;"
                                            *matCellDef="let point">
                                            <span class="pr-6 font-medium whitespace-nowrap">
                                                {{point.point}}
                                            </span>
                                        </td>
                                    </ng-container>

                                    <!-- Balance -->
                                    <ng-container matColumnDef="balance">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0; padding-left: 0.3rem;">
                                            Balance
                                        </th>
                                        <td mat-cell [routerLink]="['./memberpoint', point.id]" style="cursor:pointer;"
                                            *matCellDef="let point">
                                            <span class="pr-6 font-medium whitespace-nowrap">
                                                {{point.balance}}
                                            </span>
                                        </td>
                                    </ng-container>

                                    <!-- Expire At -->
                                    <ng-container matColumnDef="spending_valid_to">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0; padding-left: 0.5rem;">
                                            Expire At
                                        </th>
                                        <td mat-cell [routerLink]="['./memberpoint', point.id]" style="cursor:pointer;"
                                            *matCellDef="let point">
                                            <span class="pr-6 font-medium whitespace-nowrap">
                                                {{point.spending_valid_to | date:'MMM dd, y'}}
                                            </span>
                                        </td>
                                    </ng-container>
        
                                    <!-- Footer -->
                                    <ng-container *ngIf="points.length > 0">
                                        <ng-container matColumnDef="recentPointsTableFooter">
                                            <td class="py-6 px-0 border-0"
                                                mat-footer-cell
                                                *matFooterCellDef
                                                colspan="5">
                                                <button mat-stroked-button
                                                        [routerLink]="['./memberpoint']">
                                                    See All Member Points
                                                </button>
                                            </td>
                                        </ng-container>
                                    </ng-container>
        
                                    <ng-container *ngIf="points.length === 0">
                                        <ng-container matColumnDef="recentPointsTableFooter">
                                            <td class="py-6 px-0 border-0"
                                                mat-footer-cell
                                                *matFooterCellDef
                                                colspan="5"
                                                style="color:grey;">
                                                No Member Points
                                                <!-- <button mat-stroked-button
                                                        [routerLink]="['./memberpoint']">
                                                    See All Member Points
                                                </button> -->
                                            </td>
                                        </ng-container>
                                    </ng-container>
        
                                    <tr mat-header-row
                                        *matHeaderRowDef="recentPointsTableColumns"></tr>
                                    <tr class="order-row h-16"
                                        mat-row
                                        *matRowDef="let row; columns: recentPointsTableColumns;"></tr>
                                    <tr class="h-16 border-0"
                                        mat-footer-row
                                        *matFooterRowDef="['recentPointsTableFooter']"></tr>
                                </table>
                            </div>
                        </div>

                        <!-- Recent member vouchers table -->
                        <div class="flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                            <div class="p-6">
                                <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate">Member Vouchers</div>
                            </div>
                            <div class="overflow-x-auto mx-6">
                                <table class="w-full bg-transparent"
                                       mat-table
                                       matSort
                                       [dataSource]="recentMemberVouchersDataSource"
                                       [trackBy]="trackByFn"
                                       #recentMemberVouchersTable>
        
                                    <!-- Voucher Code -->
                                    <ng-container matColumnDef="voucher_code">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Voucher Code
                                        </th>
                                        <ng-container mat-cell *matCellDef="let memberVouchers">
                                            <td mat-cell [routerLink]="['./voucher', memberVouchers.id]" style="cursor:pointer;">
                                                <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                    {{memberVouchers.voucher_code}}
                                                </span>
                                            </td>
                                        </ng-container>
                                    </ng-container>
        
                                    <!-- Points Used -->
                                    <ng-container matColumnDef="points_used">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Points Used
                                        </th>
                                        <ng-container mat-cell *matCellDef="let memberVouchers">
                                            <td mat-cell [routerLink]="['./voucher', memberVouchers.id]" style="cursor:pointer;">
                                                <span class="pr-6 font-medium whitespace-nowrap">
                                                    {{memberVouchers.points_used}}
                                                </span>
                                            </td>
                                        </ng-container>
                                    </ng-container>
        
                                    <!-- Conversion Rate -->
                                    <ng-container matColumnDef="conversion_rate">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Conversion Rate
                                        </th>
                                        <ng-container mat-cell *matCellDef="let memberVouchers">
                                            <td mat-cell [routerLink]="['./voucher', memberVouchers.id]" style="cursor:pointer;">
                                                <span class="pr-6 whitespace-nowrap">
                                                    {{memberVouchers.conversion_rate}}
                                                </span>
                                            </td>
                                        </ng-container>
                                    </ng-container>
        
                                    <!-- Amount -->
                                    <ng-container matColumnDef="amount">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Amount
                                        </th>
                                        <ng-container mat-cell *matCellDef="let memberVouchers">
                                            <td mat-cell [routerLink]="['./voucher', memberVouchers.id]" style="cursor:pointer;">
                                                <span class="pr-6 whitespace-nowrap">
                                                    {{memberVouchers.amount}}
                                                </span>
                                            </td>
                                        </ng-container>
                                    </ng-container>

                                    <!-- Amount -->
                                    <ng-container matColumnDef="balance">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Balance
                                        </th>
                                        <ng-container mat-cell *matCellDef="let memberVouchers">
                                            <td mat-cell [routerLink]="['./voucher', memberVouchers.id]" style="cursor:pointer;">
                                                <span class="pr-6 whitespace-nowrap">
                                                    {{memberVouchers.balance}}
                                                </span>
                                            </td>
                                        </ng-container>
                                    </ng-container>
        
                                    <!-- Status -->
                                    <!-- <ng-container matColumnDef="point_amount">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Status
                                        </th>
                                        <ng-container mat-cell *matCellDef="let memberVouchers">
                                            <td mat-cell [routerLink]="['./voucher', memberVouchers.id]" style="cursor:pointer;">
                                                <span class="pr-6 whitespace-nowrap">
                                                    ${{transaction.point_amount | number : '1.2-2'}}
                                                </span>
                                            </td>
                                        </ng-container>
                                    </ng-container> -->
        
                                    <!-- Redeemed Order -->
                                    <!-- <ng-container matColumnDef="point_type">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Redeemed Order
                                        </th>
                                        <ng-container mat-cell *matCellDef="let memberVouchers">
                                            <td mat-cell [routerLink]="['./voucher', memberVouchers.id]" style="cursor:pointer;">
                                                <span class="pr-6 whitespace-nowrap" style="text-transform:capitalize;">
                                                    {{transaction.point_type}}
                                                </span>
                                            </td>
                                        </ng-container>
                                    </ng-container> -->
        
                                    <!-- Button Email to Customer -->
                                    <!-- <ng-container matColumnDef="balance">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Send <br/> Email
                                        </th>
                                        <td mat-cell style="cursor:pointer;"
                                            *matCellDef="let memberVouchers">
                                            <button mat-icon-button color="primary" [matTooltip]="'Send Email'">
                                                <mat-icon>send</mat-icon>
                                            </button>
                                        </td>
                                    </ng-container> -->
        
                                    <!-- Footer -->
                                    <ng-container *ngIf="memberVouchers.length > 0">
                                        <ng-container matColumnDef="recentMemberVouchersTableFooter">
                                            <td class="py-6 px-0 border-0"
                                                mat-footer-cell
                                                *matFooterCellDef
                                                colspan="6">
                                                <button mat-stroked-button [routerLink]="['./voucher']">See All Member Vouchers</button>
                                            </td>
                                        </ng-container>
                                    </ng-container>
        
                                    <ng-container *ngIf="memberVouchers.length === 0">
                                        <ng-container matColumnDef="recentMemberVouchersTableFooter">
                                            <td class="py-6 px-0 border-0"
                                                mat-footer-cell
                                                *matFooterCellDef
                                                colspan="6"
                                                style="color:grey;">
                                                No Member Vouchers
                                            </td>
                                        </ng-container>
                                    </ng-container>
        
                                    <tr mat-header-row
                                        *matHeaderRowDef="recentMemberVouchersTableColumns"></tr>
                                    <tr class="order-row h-16"
                                        mat-row
                                        *matRowDef="let row; columns: recentMemberVouchersTableColumns;"></tr>
                                    <tr class="h-16 border-0"
                                        mat-footer-row
                                        *matFooterRowDef="['recentMemberVouchersTableFooter']"></tr>
                                </table>
                            </div>
                        </div>
        
                        <!-- Recent transactions table -->
                        <div class="col-span-2 flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                            <div class="p-6">
                                <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate">Recent Transactions</div>
                                <!-- <div class="text-secondary font-medium">1 pending, 4 completed</div> -->
                            </div>
                            <div class="overflow-x-auto mx-6">
                                <table class="w-full bg-transparent"
                                       mat-table
                                       matSort
                                       [dataSource]="recentTransactionsDataSource"
                                       [trackBy]="trackByFn"
                                       #recentTransactionsTable>
        
                                    <!-- Transaction ID -->
                                    <ng-container matColumnDef="document_no">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Order No
                                        </th>
                                        <ng-container mat-cell *matCellDef="let transaction">
                                            <ng-container *ngIf="transaction.point_type !== 'adjustment'">
                                                <td mat-cell [routerLink]="['./transaction', transaction.id]" style="cursor:pointer;">
                                                    <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                        {{transaction.document_no}}
                                                    </span>
                                                </td>
                                            </ng-container>
                                            <ng-container *ngIf="transaction.point_type === 'adjustment'">
                                                <td mat-cell>
                                                    <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                        {{transaction.document_no}}
                                                    </span>
                                                </td>
                                            </ng-container>
                                        </ng-container>
        
                                    </ng-container>
        
                                    <!-- Amount -->
                                    <ng-container matColumnDef="total_amount">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Amount
                                        </th>
                                        <ng-container mat-cell *matCellDef="let transaction">
                                            <ng-container *ngIf="transaction.point_type !== 'adjustment'">
                                                <td mat-cell [routerLink]="['./transaction', transaction.id]" style="cursor:pointer;">
                                                    <span class="pr-6 font-medium whitespace-nowrap">
                                                        ${{transaction.total_amount| number : '1.2-2'}}
                                                    </span>
                                                </td>
                                            </ng-container>
                                            <ng-container *ngIf="transaction.point_type === 'adjustment'">
                                                <td mat-cell>
                                                    <span class="pr-6 font-medium whitespace-nowrap">
                                                        ${{transaction.total_amount| number : '1.2-2'}}
                                                    </span>
                                                </td>
                                            </ng-container>
                                        </ng-container>
        
                                    </ng-container>
        
                                    <!-- Name -->
                                    <ng-container matColumnDef="channel_name">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Channel
                                        </th>
                                        <ng-container mat-cell *matCellDef="let transaction">
                                            <ng-container *ngIf="transaction.point_type !== 'adjustment'">
                                                <td mat-cell [routerLink]="['./transaction', transaction.id]" style="cursor:pointer;">
                                                    <ng-container *ngIf="transaction.transaction_channel !== null">
                                                        <span class="pr-6 whitespace-nowrap">
                                                            {{transaction.transaction_channel.name}}
                                                        </span>
                                                    </ng-container>
                                                    <ng-container *ngIf="transaction.transaction_channel === null">
                                                        <span class="pr-6 whitespace-nowrap">
                                                            -
                                                        </span>
                                                    </ng-container>
                                                </td>
                                            </ng-container>
                                            <ng-container *ngIf="transaction.point_type === 'adjustment'">
                                                <td mat-cell>
                                                    <ng-container *ngIf="transaction.transaction_channel !== null">
                                                        <span class="pr-6 whitespace-nowrap">
                                                            {{transaction.transaction_channel.name}}
                                                        </span>
                                                    </ng-container>
                                                    <ng-container *ngIf="transaction.transaction_channel === null">
                                                        <span class="pr-6 whitespace-nowrap">
                                                            -
                                                        </span>
                                                    </ng-container>
                                                </td>
                                            </ng-container>
                                        </ng-container>
        
                                    </ng-container>
        
                                    <!-- Points -->
                                    <ng-container matColumnDef="point">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Earned Points
                                        </th>
                                        <ng-container mat-cell *matCellDef="let transaction">
                                            <ng-container *ngIf="transaction.point_type !== 'adjustment'">
                                                <td mat-cell [routerLink]="['./transaction', transaction.id]" style="cursor:pointer;">
                                                    <span class="pr-6 whitespace-nowrap">
                                                        {{transaction.point}}
                                                    </span>
                                                </td>
                                            </ng-container>
                                            <ng-container *ngIf="transaction.point_type === 'adjustment'">
                                                <td mat-cell>
                                                    <span class="pr-6 whitespace-nowrap">
                                                        {{transaction.point}}
                                                    </span>
                                                </td>
                                            </ng-container>
                                        </ng-container>
        
                                    </ng-container>
        
                                    <!-- Point Type -->
                                    <ng-container matColumnDef="point_type">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Point Type
                                        </th>
                                        <ng-container mat-cell *matCellDef="let transaction">
                                            <ng-container *ngIf="transaction.point_type !== 'adjustment'">
                                                <td mat-cell [routerLink]="['./transaction', transaction.id]" style="cursor:pointer;">
                                                    <span class="pr-6 whitespace-nowrap" style="text-transform:capitalize;">
                                                        {{transaction.point_type}}
                                                    </span>
                                                </td>
                                            </ng-container>
                                            <ng-container *ngIf="transaction.point_type === 'adjustment'">
                                                <td mat-cell>
                                                    <span class="pr-6 whitespace-nowrap" style="text-transform:capitalize;">
                                                        {{transaction.point_type}}
                                                    </span>
                                                </td>
                                            </ng-container>
                                        </ng-container>
                                    </ng-container>
        
                                    <!-- Date -->
                                    <ng-container matColumnDef="purchase_date">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Date
                                        </th>
                                        <ng-container mat-cell *matCellDef="let transaction">
                                            <ng-container *ngIf="transaction.point_type !=='adjustment'">
                                                <td mat-cell [routerLink]="['./transaction', transaction.id]" style="cursor:pointer;">
                                                    <span class="pr-6 whitespace-nowrap">
                                                        {{transaction.purchase_date | date:'MMM dd, y'}}
                                                    </span>
                                                </td>
                                            </ng-container>
                                            <ng-container *ngIf="transaction.point_type === 'adjustment'">
                                                <td mat-cell>
                                                    <span class="pr-6 whitespace-nowrap">
                                                        {{transaction.purchase_date | date:'MMM dd, y'}}
                                                    </span>
                                                </td>
                                            </ng-container>
                                        </ng-container>
        
                                    </ng-container>
        
                                    <!-- Footer -->
                                    <ng-container *ngIf="transactions.length > 0">
                                        <ng-container matColumnDef="recentTransactionsTableFooter">
                                            <td class="py-6 px-0 border-0"
                                                mat-footer-cell
                                                *matFooterCellDef
                                                colspan="6">
                                                <button mat-stroked-button [routerLink]="['./transaction']">See All Transactions</button>
                                            </td>
                                        </ng-container>
                                    </ng-container>
        
                                    <ng-container *ngIf="transactions.length === 0">
                                        <ng-container matColumnDef="recentTransactionsTableFooter">
                                            <td class="py-6 px-0 border-0"
                                                mat-footer-cell
                                                *matFooterCellDef
                                                colspan="6"
                                                style="color:grey;">
                                                No Transactions
                                            </td>
                                        </ng-container>
                                    </ng-container>
        
        
                                    <tr mat-header-row
                                        *matHeaderRowDef="recentTransactionsTableColumns"></tr>
                                    <tr class="order-row h-16"
                                        mat-row
                                        *matRowDef="let row; columns: recentTransactionsTableColumns;"></tr>
                                    <tr class="h-16 border-0"
                                        mat-footer-row
                                        *matFooterRowDef="['recentTransactionsTableFooter']"></tr>
                                </table>
                            </div>
                        </div>
        
                        <!-- Member Documents table -->
                        <div class="col-span-2 flex flex-col flex-auto bg-card shadow rounded-2xl overflow-hidden">
                            <div class="p-6">
                                <div class="mr-4 text-lg font-medium tracking-tight leading-6 truncate">Member Documents</div>
                            </div>
                            <div class="overflow-x-auto mx-6">
                                <table class="w-full bg-transparent"
                                       mat-table
                                       matSort
                                       [dataSource]="memberDocumentsDataSource"
                                       [trackBy]="trackByFn"
                                       #memberDocumentsTable>
        
                                     <!-- Document Name -->
                                    <ng-container matColumnDef="document_name">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Document Name
                                        </th>
                                        <td mat-cell (click)="toggleEditMode(true)" style="cursor:pointer;"
                                            *matCellDef="let crmdocument">
                                            <span class="pr-6 font-medium text-sm text-secondary whitespace-nowrap">
                                                {{crmdocument.document_name}}
                                            </span>
                                        </td>
                                    </ng-container>
                                     
                                    <!-- Uploaded Date -->
                                    <ng-container matColumnDef="uploaded_on">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Uploaded Date
                                        </th>
                                        <td mat-cell (click)="toggleEditMode(true)" style="cursor:pointer;"
                                            *matCellDef="let crmdocument">
                                            <span class="pr-6 whitespace-nowrap" style="text-transform:capitalize;">
                                                {{crmdocument.uploaded_on | date:'MMM dd, y'}}
                                            </span>
                                        </td>
                                    </ng-container>
        
                                    <!-- Comment -->
                                    <ng-container matColumnDef="comment">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Comment
                                        </th>
                                        <td mat-cell (click)="toggleEditMode(true)" style="cursor:pointer;"
                                            *matCellDef="let crmdocument">
                                            <span class="pr-6 font-medium whitespace-nowrap">
                                                {{crmdocument.comment}}
                                            </span>
                                        </td>
                                    </ng-container>
        
                                    <!-- Download Button -->
                                    <ng-container matColumnDef="file_path">
                                        <th mat-header-cell
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Download
                                        </th>
                                        <td mat-cell style="cursor:pointer;"
                                            *matCellDef="let crmdocument">
                                            <button mat-icon-button [matTooltip]="'Download'" (click)="downloadFile(crmdocument.file_path)">
                                                <mat-icon>cloud_download</mat-icon>
                                            </button>
                                        </td>
                                    </ng-container>
        
                                    <!-- Hidden Delete Button -->
                                    <ng-container matColumnDef="uploaded_by_name" hidden="true">
                                        <th mat-header-cell hidden="true"
                                            *matHeaderCellDef style="background:#e2e8f0;">
                                            Delete
                                        </th>
                                        <td mat-cell hidden="true" style="cursor:pointer;"
                                            *matCellDef="let crmdocument">
                                            <button mat-icon-button color="warn" (click)="deleteFile(crmdocument)">
                                                <mat-icon>delete</mat-icon>
                                            </button>
                                        </td>
                                    </ng-container>

                                    <!--Member Documents Footer-->
                                    <ng-container *ngIf="memberDocument.length > 0">
                                        <ng-container matColumnDef="memberDocumentsTableFooter">
                                            <td class="py-6 px-0 border-0"
                                                mat-footer-cell
                                                *matFooterCellDef
                                                colspan="4">
                                                <button mat-stroked-button (click)="toggleEditMode(true)">See All Member Documents</button>
                                            </td>
                                        </ng-container>
                                    </ng-container>

                                    <ng-container *ngIf="memberDocument.length === 0">
                                        <ng-container matColumnDef="memberDocumentsTableFooter">
                                            <td class="py-6 px-0 border-0"
                                                mat-footer-cell
                                                *matFooterCellDef
                                                colspan="4"
                                                style="color:grey;">
                                                No Member Documents
                                            </td>
                                        </ng-container>
                                    </ng-container>
                                    
                                    <tr mat-header-row
                                        *matHeaderRowDef="memberDocumentsTableColumns"></tr>
                                    <tr class="order-row h-16"
                                        mat-row
                                        *matRowDef="let row; columns: memberDocumentsTableColumns;"></tr>
                                    <tr class="h-16 border-0"
                                        mat-footer-row
                                        *matFooterRowDef="['memberDocumentsTableFooter']"></tr>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf="!editMode && !pointlistMode && !transactionlistMode && !pointDetailViewMode && !pointDetailEditMode && !pointDetailAddMode && !transactionDetailMode">
                <div class="relative flex flex-col flex-auto p-6 pt-0 sm:p-12 sm:pt-0 see_all_member_log">
                    <button mat-stroked-button [routerLink]="['./memberlog']">See Member Logs</button>
                </div>
            </ng-container>
        
            <!-- Edit mode -->
            <ng-container *ngIf="editMode">
                <!-- Header -->
                <div class="relative w-full h-20 sm:h-20 px-8 sm:px-12 bg-accent-100 dark:bg-accent-700" style="position: sticky !important;top: 0;z-index: 99;">
                    <!-- Close button -->
                    <div class="flex items-center justify-end w-full max-w-3xl mx-auto pt-3">
                        <div class="mt-3 text-4xl w-full font-bold truncate">Edit Member Information</div>
                        <button mat-icon-button style="background: #ccc;"
                                [matTooltip]="'Close'"
                                (click)="toggleEditMode(false)">
                            <mat-icon class="text-white"
                                      [svgIcon]="'heroicons_outline:x'"></mat-icon>
                        </button>
                    </div>
                </div>
        
                <!-- member form -->
                <div class="relative flex flex-col flex-auto items-center px-6 sm:px-12">
                    <div class="w-full max-w-3xl">
                        <!-- Alert -->
                        <fuse-alert class="mt-8 -mb-4"
                                    *ngIf="showAlert"
                                    [appearance]="'outline'"
                                    [showIcon]="false"
                                    [type]="alert.type"
                                    [@shake]="alert.type === 'error'">
                            {{alert.message}}
                        </fuse-alert>
                        <form [formGroup]="memberForm">
                            <!-- hidden Id -->
                            <div class="mt-8 hidden">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <input matInput
                                           [formControlName]="'id'">
                                </mat-form-field>
                            </div>
        
                            <!-- First Name -->
                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>First Name</mat-label>
                                    <mat-icon matPrefix
                                              class="hidden sm:flex icon-size-5"
                                              [svgIcon]="'heroicons_solid:user-circle'"></mat-icon>
                                    <input matInput
                                           [formControlName]="'first_name'"
                                           [placeholder]="'First Name'"
                                           [spellcheck]="false">
                                </mat-form-field>
                            </div>
        
                            <!--Last Name -->
                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Last Name</mat-label>
                                    <mat-icon matPrefix
                                              class="hidden sm:flex icon-size-5"
                                              [svgIcon]="'heroicons_solid:user-circle'"></mat-icon>
                                    <input matInput
                                           [formControlName]="'last_name'"
                                           [placeholder]="'Last Name'"
                                           [spellcheck]="false">
                                </mat-form-field>
                            </div>
        
                            <!-- Phone numbers -->
                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Mobile Phone</mat-label>
                                    <mat-icon matPrefix
                                              class="hidden sm:flex icon-size-5"
                                              [svgIcon]="'heroicons_outline:phone'"></mat-icon>
                                    <input matInput
                                           [formControlName]="'mobile_phone'"
                                           [placeholder]="'Mobile'">
                                </mat-form-field>
                                <ng-container *ngIf="!phoneValidateError">
                                    <mat-error>
                                        Kindly register with a different email address
                                    </mat-error>
                                </ng-container>
                            </div>
        
                            <!-- Birthday -->
                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Birthday</mat-label>
                                    <mat-icon matPrefix
                                              class="hidden sm:flex icon-size-5"
                                              [svgIcon]="'heroicons_solid:cake'"></mat-icon>
                                    <input matInput
                                           [matDatepicker]="birthdayDatepicker"
                                           [formControlName]="'date_of_birth'"
                                           [placeholder]="'Birthday'">
                                    <mat-datepicker-toggle matSuffix
                                                           [for]="birthdayDatepicker">
                                    </mat-datepicker-toggle>
                                    <mat-datepicker #birthdayDatepicker></mat-datepicker>
                                </mat-form-field>
                            </div>
                            
                            <!-- Gender -->
                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Gender</mat-label>
                                    <mat-select [formControlName]="'gender'">
                                        <mat-option value="Male">Male</mat-option>
                                        <mat-option value="Female">Female</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
        
                            <!-- Add Allow E-mail -->
                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Allow Email</mat-label>
                                    <mat-select [formControlName]="'accept_email'">
                                        <mat-option [value]="true">Yes</mat-option>
                                        <mat-option [value]="false">No</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
        
                            <!-- Add Allow SMS -->
                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Allow SMS</mat-label>
                                    <mat-select [formControlName]="'accept_mobile_sms'">
                                        <mat-option [value]="true">Yes</mat-option>
                                        <mat-option [value]="false">No</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
        
                            <!-- Member Tier -->
                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Member Tier</mat-label>
                                    <mat-select [formControlName]="'member_tier_id'">
                                        <ng-container *ngFor="let tier of memberTiers">
                                            <mat-option [value]="tier.id">
                                                {{tier.name}}
                                            </mat-option>
                                        </ng-container>
                                    </mat-select>
                                </mat-form-field>
                            </div>
        
                            <div class="flex items-center mt-10 -mx-6 sm:-mx-12 py-4 pr-4 pl-1 sm:pr-12 sm:pl-7 border-t bg-gray-50 dark:bg-transparent">
                                <button class="ml-2" style="width: 6rem;"
                                        mat-flat-button
                                        [color]="'primary'"
                                        [disabled]="memberForm.invalid"
                                        [matTooltip]="'Save'"
                                        (click)="updateMember()">
                                    Save
                                </button>
                            </div>
                        </form>
                    </div>
                </div>
        
                <!-- Member Documents table -->
                <div class="flex flex-col flex-auto min-w-0 sm:overflow-hidden bg-card dark:bg-transparent" style="position: relative; margin-left: 6rem !important; margin-right: 6rem !important;">
        
                    <div class="relative flex flex-col sm:flex-row flex-0 sm:items-center sm:justify-between py-8 px-6 md:px-8 border-b">
                        <div class="absolute inset-x-0 bottom-0"
                             *ngIf="isLoading">
                            <mat-progress-bar [mode]="'indeterminate'"></mat-progress-bar>
                        </div>
        
                        <div class="text-4xl font-extrabold tracking-tight">Member Documents</div>
        
                        <div class="flex flex-shrink-0 items-center mt-6 sm:mt-0 sm:ml-4">
                            <!--sorting dropdown-->
                            <mat-form-field class="ml-4 fuse-mat-no-subscript memberdocument-2-sort">
                                <span class="memberdocument_sort_by">Sort By:</span>
                                <mat-select [(ngModel)]="selectedCoulumn" (selectionChange)="sortingColumnList()">
                                    <mat-option value="documentname">Document Name</mat-option>
                                    <mat-option value="uploadeddate">Uploaded Date</mat-option>
                                </mat-select>
                            </mat-form-field>
                            <!--sorting button-->
                            <button class="ml-2 memberdetail-sort-btn-01"
                                (click)="sortingPageList()"
                                [ngClass]="{'sort-asc': isAscending, 'sort-desc': !isAscending}"
                                mat-stroked-button>
                            </button> 
                        </div>
                    </div>
        
                    <!-- Main -->
                    <div class="flex flex-auto overflow-hidden">
        
                        <!-- Member Documents List -->
                        <div class="flex flex-col flex-auto sm:mb-18 overflow-hidden sm:overflow-y-auto">
                            <ng-container *ngIf="memberDocument.length > 0; else nomemberDocuments">
                                <div class="grid">
                                    <!-- Header -->
                                    <div class="memberdocument-grid z-10 sticky top-0 grid gap-4 py-4 px-6 md:px-8 shadow text-md font-semibold text-secondary bg-gray-50 dark:bg-black dark:bg-opacity-5"
                                         matSort
                                         matSortDisableClear>

                                        <div> Document Name </div>
                                        <div> Uploaded Date </div>
                                        <div> Comment </div>
                                        <div style="text-align: center;"> Download </div>
                                        <div style="text-align: center;"> Delete </div>
                                    </div>

                                    <!-- Rows -->
                                    <ng-container *ngFor="let document of memberDocument; trackBy: trackByFn">
                                        <a class=" cursor-pointer hover:bg-gray-100 dark:hover:bg-hover">
                                            <div class="memberdocument-grid grid items-center gap-4 py-3 px-6 md:px-8 border-b">
                                               
                                                <div class="truncate">
                                                    {{document.document_name}}
                                                </div>

                                                <div class="truncate">
                                                    {{document.uploaded_on | date:'MMM dd, y'}}
                                                </div>

                                                <div class="truncate">
                                                    {{document.comment}}
                                                </div>

                                                <div class="truncate" style="text-align: center;">
                                                    <button mat-icon-button [matTooltip]="'Download'" (click)="downloadFile(document.file_path)">
                                                        <mat-icon>cloud_download</mat-icon>
                                                    </button>
                                                </div>

                                                <div class="truncate" style="text-align: center;">
                                                    <button mat-icon-button [matTooltip]="'Delete'" color="warn" (click)="DeleteDrawer(document.id)">
                                                        <mat-icon>delete</mat-icon>
                                                    </button>
                                                </div>
                                            </div>
                                        </a>
                                    </ng-container>
                                </div>
    
                                <mat-paginator class="sm:absolute sm:inset-x-0 sm:bottom-0 border-b sm:border-t sm:border-b-0 z-10 bg-gray-50 dark:bg-transparent"
                                        [ngClass]="{'pointer-events-none': isLoading}"
                                        [length]="memberDocumentPagination.length"
                                        [pageIndex]="memberDocumentPagination.page"
                                        [pageSize]="memberDocumentPagination.limit"
                                        [pageSizeOptions]="[5, 10, 25, 50]"
                                        (page)="onPageChange($event)"
                                        [showFirstLastButtons]="true"></mat-paginator>
    
                            </ng-container>

                            <ng-template #nomemberDocuments>
                                <div class="p-8 sm:p-16 border-t text-3xl font-semibold tracking-tight text-center">There are no member documents!</div>
                            </ng-template>
                        </div>
                    </div>
                </div>

                <!-- Member Documents Upload Form -->
                <div class="col-span-2 flex flex-col flex-auto bg-card shadow rounded-2xl mx-6 mt-10 overflow-hidden" style="position: relative; margin: 3rem 6rem !important;">
                    <div style="border-radius: 10px; border: 1px dashed black; margin: 1rem;">
                        <div class="mb-5"> <span class="text-lg font-medium justify-center" style="position: relative; top: 1rem; left: 1rem; border-bottom: 1px solid black;"> Select File And Upload </span></div>
                        
                            <div class="w-full h-20 flex items-center justify-center" style="cursor:pointer; border-radius: 3px;">
                                <div style="border-bottom: 1px solid black;">
                                    <input class="ng-hide mr-9" #fileInput multiple type="file" (change)="onFileSelected($event)" accept=".csv,.xlsx,.pdf,.jpg,.jpeg,.png,.docx" style="margin-bottom: 9px;" />
                                    <button mat-icon-button [matTooltip]="'Clear'" *ngIf="showClearButton" (click)="clearFileToUpload()" style="width: 35px; height: 35px; border-radius: 9999px !important; border: 1px solid #4f46e5; top: 1px;">
                                        <span>x</span>
                                    </button>
                                </div>
                            </div>
                            <div *ngIf="fileAcceptedSuccessMessage" style="position: relative; bottom: 0.5rem; text-align: center; color: green;">
                                {{ fileAcceptedSuccessMessage }}
                            </div>

                            <div *ngIf="fileNotAcceptedErrorMessage" style="position: relative; bottom: 0.5rem; text-align: center; color: red;">
                                {{ fileNotAcceptedErrorMessage }}
                            </div>

                            <div *ngIf="errorMessage" style="position: relative; bottom: 0.5rem; text-align: center; color: red;">
                                {{ errorMessage }}
                            </div>

                            <div style="display: grid; align-items: center; justify-content: center;">
                                <span>Accept File Types!</span>
                                <span>* .xlsx, .docx, .pdf, .csv, images (.jpg, .png and .jpeg)</span>
                            </div>
                            <br/>
                            <label for="comment" style="display: flex; font-weight: 500; padding-right: 17rem; justify-content: center;">Comment:</label>
                            <div class="w-full flex items-center justify-center">
                                <textarea id="comment" [(ngModel)]="comment" required placeholder="Enter your comment" style="border-radius: 5px; padding: 5px; padding-left: 6px; border: 1px dashed black; width: 21rem; height: 6rem;"></textarea>
                            </div>

                            <div style="display: grid; align-items: end; justify-content: end; margin: 2rem 2rem;">
                                <button style="width: 6rem !important;"
                                    [disabled]="isUploadDisabled"
                                    mat-flat-button
                                    [color] = "'primary'"
                                    [matTooltip]="'Upload'"
                                    class="h-10 md-button md-raised md-primary"
                                    (click)="uploadMemberDocumentsFile()">
                                    Upload
                                </button>
                            </div>
                    </div>
                </div>
            </ng-container>
        </div>
    </mat-drawer-content>
</mat-drawer-container>
