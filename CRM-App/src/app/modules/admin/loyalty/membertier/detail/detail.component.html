<mat-drawer-container class="flex flex-col w-full">
    <mat-drawer #drawerOne class="membertier_reset_popup dark:bg-gray-900"
                [mode]="'over'"
                [opened]="false"
                [position]="'start'"
                [disableClose]="true">

        <!-- Delete single member tier popup -->
        <ng-container *ngIf="DeleteMode">
            <ng-container *ngIf="isSuccess">
                <div class="flex justify-start w-full ng-tns-c188-34 p-5" style="margin-bottom: -2em;">
                    <div>
                        <button
                                *ngIf="errorMessage"      
                                mat-icon-button style="background-color:#ccc; position: fixed; right: 1rem;"
                                [matTooltip]="'Close'"
                                [routerLink]="['/member-tier']">
                            <mat-icon class="text-white"
                                        [svgIcon]="'heroicons_outline:x'"></mat-icon>
                        </button>
                    </div>
                </div>
                <div class="mt-8">
                    <div class="membertier_successMessage_scss" *ngIf="successMessage">
                        {{ successMessage }} 
                    </div>
                    <div class="membertier_errorMessage_scss" *ngIf="errorMessage">
                        {{ errorMessage }} 
                    </div>
                </div>
            </ng-container>

            <ng-container *ngIf="!isSuccess">
                <div class="membertier_parent_popup">
                    <div>
                        <div class="membertier_delete_scss"> Are you sure want to delete? </div>
                    </div>    
                    <div class="membertier_child_btn">
                        <button
                                mat-flat-button
                                [color]="'primary'"
                                [matTooltip]="'Cancel'"
                                (click)="cancelPopup()"
                                >
                            Cancel
                        </button>
    
                        <button
                                mat-flat-button
                                [color]="'primary'"
                                [matTooltip]="'Proceed'"
                                (click)="proceedPopup()"
                                >
                            Proceed
                        </button>
                    </div>
                </div>
            </ng-container>
        </ng-container>
    </mat-drawer>
    
    <mat-drawer #drawerTwo class="w-2/4 dark:bg-gray-900"
                [mode]="'over'"
                [opened]="false"
                [position]="'end'"
                [disableClose]="true">

        <!-- Tier Upgrade Form-->
        <ng-container *ngIf="tierUpgradeFormMode">
            <div class="flex justify-start w-full ng-tns-c188-34 p-5" style="margin-bottom: -2em;">
                <div class="">
                    <button mat-icon-button style="background-color:#ccc;"
                            [matTooltip]="'Close'"
                            (click)="drawerTwo.close()">
                        <mat-icon class="text-white"
                                  [svgIcon]="'heroicons_outline:x'"></mat-icon>
                    </button>
                </div>
                <div class="w-full text-3xl font-bold" style="text-align:center;"> Member Tier Upgrade</div>
            </div>

            <div class="flex-auto p-5">
                <form [formGroup]="TierUpgradeForm">

                    <div class="mt-8 hidden">
                        <mat-form-field class="fuse-mat-no-subscript w-full">
                            <mat-label>id</mat-label>
                            <input matInput
                                   [formControlName]="'id'"
                                   [placeholder]="'id'">
                        </mat-form-field>
                    </div>

                    <div class="mt-8">
                        <mat-form-field class="fuse-mat-no-subscript w-full">
                            <mat-label>Item Number</mat-label>
                            <input matInput
                                   [formControlName]="'item_number'"
                                   [placeholder]="'item_number'">
                        </mat-form-field>
                    </div>

                    <div class="mt-8">
                        <mat-form-field class="fuse-mat-no-subscript w-full">
                            <mat-label>Price</mat-label>
                            <mat-icon matPrefix
                                      class="hidden sm:flex icon-size-5"
                                      [svgIcon]="'heroicons_outline:currency-dollar'"></mat-icon>
                            <input matInput type="number"
                                   [formControlName]="'price'"
                                   [placeholder]="'price'">
                        </mat-form-field>
                    </div>

                    <div class="mt-8">
                        <mat-form-field class="fuse-mat-no-subscript w-full">
                            <mat-label>Upgrade Tier</mat-label>
                            <mat-select [formControlName]="'upgrade_tier'">
                                <ng-container *ngFor="let tier of memberTiers">
                                    <mat-option [value]="tier.id">
                                        {{tier.name}}
                                    </mat-option>
                                </ng-container>
                            </mat-select>
                        </mat-form-field>
                    </div>

                    <div class="flex items-center mt-10 -mx-6 sm:-mx-12 py-4 pr-4 pl-1 sm:pr-12 sm:pl-7 border-t bg-gray-50 dark:bg-transparent">
                        <button class="ml-2" style="width: 6rem;"
                                mat-flat-button
                                [disabled]="TierUpgradeForm.invalid"
                                [color]="'primary'"
                                [matTooltip]="'Save'"
                                (click)="createTierUpgrade()">
                            Save
                        </button>
                    </div>

                </form>
            </div>
        </ng-container>
        
    </mat-drawer>

    <mat-drawer-content style="background-color: #fff;">
        <div class="flex flex-col w-full">
            <!-- View -->
            <ng-container *ngIf="!pointAddFormMode">
                <div class="relative w-full h-40 sm:h-20 px-8 sm:px-12 bg-accent-100 dark:bg-accent-700">
                    <!-- Close button -->
                    <div class="flex items-center w-full max-w-3xl mx-auto pt-2">
                        <div class="mt-3 text-4xl w-full font-bold truncate">
                            {{memberTier.name}}
                            <button mat-stroked-button
                                    (click)="tooglepointAddFormMode(true)">
                                <mat-icon class="icon-size-5"
                                          [svgIcon]="'heroicons_solid:pencil-alt'"></mat-icon>
                                <span class="ml-2">Edit</span>
                            </button>
                        </div>

                        <button mat-icon-button
                                [matTooltip]="'Close'"
                                [routerLink]="['/member-tier']"
                                style="background:#ccc;">
                            <mat-icon class="text-white"
                                      [svgIcon]="'heroicons_outline:x'"></mat-icon>
                        </button>
                    </div>

                </div>

                <div class="relative flex flex-col flex-auto items-center p-6 pt-0 sm:p-12 sm:pt-0">
                    <div class="w-full max-w-3xl">
                        <div class="flex flex-col mt-4 pt-6 space-y-3">

                            <ng-container *ngIf="memberTier.code">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">Code: </div>
                                    <div class="ml-6 leading-6">{{memberTier.code}}</div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="memberTier.description">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">Description: </div>
                                    <div class="ml-6 leading-6">{{memberTier.description}}</div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="memberTier.level">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">Level: </div>
                                    <div class="ml-6 leading-6">Level {{memberTier.level}}</div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="memberTier.date_created">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">Created Date: </div>
                                    <div class="ml-6 leading-6">{{memberTier.date_created | date:'MMM dd, y'}}</div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="memberTier.date_updated">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">Last Update Date: </div>
                                    <div class="ml-6 leading-6">{{memberTier.date_updated | date:'MMM dd, y'}}</div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="memberTier.status === 'active'">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">Status: </div>
                                    <div class="ml-6 leading-6">Active</div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="memberTier.status === 'draft'">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">Status: </div>
                                    <div class="ml-6 leading-6">Draft</div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="memberTier.status === 'inactive'">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">Status: </div>
                                    <div class="ml-6 leading-6">Inactive</div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="memberTier.dw_member_group">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">DW Member Group: </div>
                                    <div class="ml-6 leading-6">{{memberTier.name}}</div>
                                </div>
                            </ng-container>

                            <!-- <ng-container *ngIf="memberTier.point_rule">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">Point Rule: </div>
                                    <div class="ml-6 leading-6">{{memberTier.point_ruleFullname}}</div>
                                </div>
                            </ng-container> -->

                            <ng-container *ngIf="memberTier.condition_type === 0 || memberTier.condition_type === 1">
                                <div class="flex sm:items-center mt-3">
                                    <div class="w-full text_1xl font-bold">Upgrade</div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="memberTier.condition_type === 0">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">Condition Type: </div>
                                    <div class="ml-6 leading-6">Amount</div>
                                </div>
                                
                                <ng-container *ngIf="memberTier.min_condition_amount || memberTier.max_condition_amount || memberTier.calculation_type === 0 || memberTier.calculation_type === 1">  
                                    <div class="flex sm:items-center mt-3">
                                        <div class="w-full text_1xl font-bold">Order Value</div>
                                    </div>
                                </ng-container>

                                <ng-container *ngIf="memberTier.min_condition_amount">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Min Amount: </div>
                                        <div class="ml-6 leading-6">{{memberTier.min_condition_amount}}</div>
                                    </div>
                                </ng-container>
                                
                                <ng-container *ngIf="memberTier.max_condition_amount">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Max Amount: </div>
                                        <div class="ml-6 leading-6">{{memberTier.max_condition_amount}}</div>
                                    </div>
                                </ng-container>

                                <ng-container *ngIf="memberTier.calculation_type === 0">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Calculation Type: </div>
                                        <div class="ml-6 leading-6">And</div>
                                    </div>
                                </ng-container>

                                <ng-container *ngIf="memberTier.calculation_type === 1">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Calculation Type: </div>
                                        <div class="ml-6 leading-6">Or</div>
                                    </div>
                                </ng-container>

                                <ng-container *ngIf="memberTier.total_min_amount || memberTier.total_max_amount">
                                    <div class="flex sm:items-center mt-3">
                                        <div class="w-full text_1xl font-bold">Total Order Value for Period</div>
                                    </div>
                                </ng-container>

                                <ng-container *ngIf="memberTier.total_min_amount">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Min Amount: </div>
                                        <div class="ml-6 leading-6">{{memberTier.total_min_amount}}</div>
                                    </div>
                                </ng-container>
                                
                                <ng-container *ngIf="memberTier.total_max_amount">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Max Amount: </div>
                                        <div class="ml-6 leading-6">{{memberTier.total_max_amount}}</div>
                                    </div>
                                </ng-container>

                                <ng-container *ngIf="memberTier.condition_period === 1 || memberTier.condition_period === 2 || memberTier.condition_period === 3 || memberTier.condition_period_value">
                                    <div class="flex sm:items-center mt-3">
                                        <div class="w-full text_1xl font-bold">Order Value Period</div>
                                    </div>
                                </ng-container>
                                
                                <ng-container *ngIf="memberTier.condition_period === 1">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Condition Period: </div>
                                        <div class="ml-6 leading-6">Days</div>
                                    </div>
                                </ng-container>

                                <ng-container *ngIf="memberTier.condition_period === 2">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Condition Period: </div>
                                        <div class="ml-6 leading-6">Months</div>
                                    </div>
                                </ng-container>

                                <ng-container *ngIf="memberTier.condition_period === 3">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Condition Period: </div>
                                        <div class="ml-6 leading-6">Years</div>
                                    </div>
                                </ng-container>

                                <ng-container *ngIf="memberTier.condition_period_value">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Condition Period value: </div>
                                        <div class="ml-6 leading-6">{{memberTier.condition_period_value}} </div>
                                    </div>
                                </ng-container>
                            </ng-container>

                            <ng-container *ngIf="memberTier.condition_type === 1">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">Condition Type: </div>
                                    <div class="ml-6 leading-6">Point Range</div>
                                </div>
                                
                                <div class="flex sm:items-center mt-3">
                                    <div class="w-full text_1xl font-bold">Upgrade</div>
                                </div>

                                <ng-container *ngIf="memberTier.min_point">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Min Point: </div>
                                        <div class="ml-6 leading-6">{{memberTier.min_point}}</div>
                                    </div>
                                </ng-container>

                                <ng-container *ngIf="memberTier.max_point">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Max Point: </div>
                                        <div class="ml-6 leading-6">{{memberTier.max_point}}</div>
                                    </div>
                                </ng-container>
                            </ng-container>

                            <div class="flex sm:items-center mt-3">
                                <div class="w-full text_1xl font-bold">Downgrade</div>
                            </div>

                            <ng-container *ngIf="memberTier.downgrade_condition_type === 0">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">Downgrade Condition Type: </div>
                                    <div class="ml-6 leading-6">Never</div>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="memberTier.downgrade_condition_type === 1">
                                <div class="flex sm:items-center">
                                    <div class="w-1/4">Downgrade Condition Type: </div>
                                    <div class="ml-6 leading-6">Main Condition</div>
                                </div>

                                <ng-container *ngIf="memberTier.downgrade_condition_period === 1">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Downgrade Condition Period: </div>
                                        <div class="ml-6 leading-6">Days</div>
                                    </div>
                                </ng-container>

                                <ng-container *ngIf="memberTier.downgrade_condition_period === 2">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Downgrade Condition Period: </div>
                                        <div class="ml-6 leading-6">Months</div>
                                    </div>
                                </ng-container>

                                <ng-container *ngIf="memberTier.downgrade_condition_period === 3">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Downgrade Condition Period: </div>
                                        <div class="ml-6 leading-6">Years</div>
                                    </div>
                                </ng-container>
    
                                <ng-container *ngIf="memberTier.downgrade_condition_period_value">
                                    <div class="flex sm:items-center">
                                        <div class="w-1/4">Downgrade Condition Period Value: </div>
                                        <div class="ml-6 leading-6">{{memberTier.downgrade_condition_period_value}}</div>
                                    </div>
                                </ng-container>
                            </ng-container>
                        </div>
                    </div>
                </div>
            </ng-container>
        </div>

        <!-- Add Form-->
        <ng-container *ngIf="pointAddFormMode">
            <div class="flex flex-col w-full">
                <div class="relative w-full h-40 sm:h-20 px-8 sm:px-12 bg-accent-100 dark:bg-accent-700">
                    <div class="flex items-center w-full max-w-3xl mx-auto pt-2">
                        <div class="mt-3 text-4xl w-full font-bold truncate">Edit Member Tier</div>
                        <button mat-icon-button
                                [matTooltip]="'Close'"
                                (click)="AddFormclose()" style="background:#ccc;">
                            <mat-icon class="text-white"
                                      [svgIcon]="'heroicons_outline:x'"></mat-icon>
                        </button>
                    </div>
                </div>

                <div class="relative flex flex-col flex-auto items-center px-6 sm:px-12" style="background:#FFF;">
                    <div class="w-full max-w-3xl">
                        <form [formGroup]="memberTierAddForm">

                            <div class="mt-8 hidden">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <input matInput
                                           [formControlName]="'id'"
                                           [placeholder]="'id'"
                                           [spellcheck]="false">
                                </mat-form-field>
                            </div>

                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Name</mat-label>
                                    <mat-icon matPrefix
                                              class="hidden sm:flex icon-size-5"
                                              [svgIcon]="'heroicons_solid:user-circle'"></mat-icon>
                                    <input matInput
                                           [formControlName]="'name'"
                                           [placeholder]="'Name'"
                                           [spellcheck]="false">
                                </mat-form-field>
                            </div>

                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Code</mat-label>
                                    <mat-icon matPrefix
                                              class="hidden sm:flex icon-size-5"
                                              [svgIcon]="'heroicons_solid:briefcase'"></mat-icon>
                                    <input matInput
                                           [formControlName]="'code'"
                                           [placeholder]="'Code'">
                                </mat-form-field>
                            </div>

                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Description</mat-label>
                                    <mat-icon matPrefix
                                              class="hidden sm:flex icon-size-5"
                                              [svgIcon]="'heroicons_outline:currency-dollar'"></mat-icon>
                                    <input matInput
                                           [formControlName]="'description'"
                                           [placeholder]="'Description'">
                                </mat-form-field>
                            </div>

                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Level</mat-label>
                                    <mat-select [formControlName]="'level'" [disabled]="readonly">
                                        <mat-option [value]="1">Level 1</mat-option>
                                        <mat-option [value]="2">Level 2</mat-option>
                                        <mat-option [value]="3">Level 3</mat-option>
                                        <mat-option [value]="4">Level 4</mat-option>
                                        <mat-option [value]="5">Level 5</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Status</mat-label>
                                    <mat-select [formControlName]="'status'">
                                        <mat-option value="active">Active</mat-option>
                                        <mat-option value="draft">Draft</mat-option>
                                        <mat-option value="inactive">Inactive</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                            
                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>DW Member Group</mat-label>
                                    <mat-select [formControlName]="'dw_member_group'">
                                        <ng-container *ngFor="let dw of dwMemberGroups">
                                            <mat-option [value]="dw.id">
                                                {{ dw.name }}
                                            </mat-option>
                                        </ng-container>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <div class="flex sm:items-center mt-4">
                                <div class="w-full text_1xl font-bold" style="position: relative; top: 12px !important;">Upgrade</div>
                            </div>

                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Condition Type</mat-label>
                                    <mat-select [formControlName]="'condition_type'" [(ngModel)]="conditionTypeValue">
                                        <mat-option [value]="0">Amount</mat-option>
                                        <mat-option [value]="1">Point Range</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <ng-container *ngIf="conditionTypeValue === 0">
                                <div class="mt-3 text_1xl w-full font-bold truncate" style="position: relative; top: 15px;">Order Value</div>
                                <div class="mt-8">
                                    <mat-form-field class="fuse-mat-no-subscript w-1/3 mr-4">
                                        <mat-label>Min Amount</mat-label>
                                        <mat-icon matPrefix
                                                  class="hidden sm:flex icon-size-5"
                                                  [svgIcon]="'heroicons_outline:currency-dollar'"></mat-icon>
                                        <input matInput type="number"
                                               [formControlName]="'min_condition_amount'"
                                               [placeholder]="'Min Amount'">
                                    </mat-form-field>
    
                                    <mat-form-field class="fuse-mat-no-subscript w-1/3">
                                        <mat-label>Max Amount</mat-label>
                                        <mat-icon matPrefix
                                                  class="hidden sm:flex icon-size-5"
                                                  [svgIcon]="'heroicons_outline:currency-dollar'"></mat-icon>
                                        <input matInput type="number"
                                               [formControlName]="'max_condition_amount'"
                                               [placeholder]="'Max Amount'">
                                    </mat-form-field>
                                </div>
                                
                                <div class="mt-8">
                                    <mat-form-field class="fuse-mat-no-subscript w-full">
                                        <mat-label>Calculation Type</mat-label>
                                        <mat-select [formControlName]="'calculation_type'">
                                            <mat-option [value]="0">And</mat-option>
                                            <mat-option [value]="1">Or</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div class="mt-3 text_1xl w-full font-bold truncate" style="position: relative; top: 15px;">Total Order Value for Period</div>
                                <div class="mt-8">
                                    <mat-form-field class="fuse-mat-no-subscript w-1/3 mr-4">
                                        <mat-label>Min Amount</mat-label>
                                        <mat-icon matPrefix
                                                  class="hidden sm:flex icon-size-5"
                                                  [svgIcon]="'heroicons_outline:currency-dollar'"></mat-icon>
                                        <input matInput type="number"
                                               [formControlName]="'total_min_amount'"
                                               [placeholder]="'Min Amount'">
                                    </mat-form-field>
    
                                    <mat-form-field class="fuse-mat-no-subscript w-1/3">
                                        <mat-label>Max Amount</mat-label>
                                        <mat-icon matPrefix
                                                  class="hidden sm:flex icon-size-5"
                                                  [svgIcon]="'heroicons_outline:currency-dollar'"></mat-icon>
                                        <input matInput type="number"
                                               [formControlName]="'total_max_amount'"
                                               [placeholder]="'Max Amount'">
                                    </mat-form-field>
                                </div>

                                <div class="mt-3 text_1xl w-full font-bold truncate" style="position: relative; top: 15px;">Order Value Period</div>
                                <div class="mt-8">
                                    <mat-form-field class="fuse-mat-no-subscript w-1/3 mr-4">
                                        <mat-label>Condition Period</mat-label>
                                        <mat-select [formControlName]="'condition_period'" [(ngModel)]="conditionPeriodValue">
                                            <mat-option [value]="0">None</mat-option>
                                            <mat-option [value]="1">Days</mat-option>
                                            <mat-option [value]="2">Months</mat-option>
                                            <mat-option [value]="3">Years</mat-option>
                                        </mat-select>
                                    </mat-form-field>

                                    <mat-form-field class="fuse-mat-no-subscript w-1/3" style="position: relative; top: 4px;">
                                        <mat-label>Condition Period Value</mat-label>
                                        <mat-icon matPrefix
                                                  class="hidden sm:flex icon-size-5"
                                                  [svgIcon]="'heroicons_outline:currency-dollar'"></mat-icon>
                                        <input matInput type="number"
                                               [formControlName]="'condition_period_value'"
                                               [placeholder]="'Condition Period Value'">
                                    </mat-form-field>
                                </div>

                                <mat-form-field class="fuse-mat-no-subscript w-full hidden">
                                    <input matInput readonly style="cursor:pointer;"
                                           [formControlName]="'tier_upgrade_items'">
                                </mat-form-field>
    
                                <div class="mt-3 text_1xl w-full font-bold truncate" style="position: relative; top: 15px !important;">Upgrade Items</div>
                                <div class="mt-8">
                                    <label>Tier Upgrade Item</label>
                                    <ng-container *ngIf="selectedUpgradeItem.length === 0">
                                        <div class="mt-3 h-12" style="cursor: pointer; border: 1px solid #ccc; border-radius: 6px; padding: 10px;">
                                            <span style="color:#ccc;">Create Tier Upgrade Item</span>
                                        </div>
                                    </ng-container>
                                    <ng-container *ngIf="selectedUpgradeItem.length > 0">
                                        <ng-container *ngFor="let item of selectedUpgradeItem; trackBy: trackByFn">
                                            <div (click)="setTierUpgradeEditForm(item.id)" class="mt-3 h-12 membertier_upgrade">
                                                <span [matTooltip]="'Edit Item'" style="position: relative;left: 15px;">
                                                    {{item.item_number}}
                                                </span>
    
                                                <button mat-icon-button
                                                    class="delete_tierupgrade_item_btn"
                                                    [matTooltip]="'Delete'"
                                                    (click)="deleteTierUpgradeItem(item.id)">
                                                    <mat-icon class="text-white"
                                                        [svgIcon]="'heroicons_outline:x'"></mat-icon>
                                                </button>
                                            </div>
                                        </ng-container>
                                    </ng-container>
                                </div>
    
                                <div class="mt-4">
                                    <button class="w-1/8"
                                            mat-stroked-button
                                            [matTooltip]="'Create Tire Upgrade Item'"
                                            (click)="openTierUpgradeForm()">
                                        <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon>
                                        <span class="ml-2 mr-1">Add</span>
                                    </button>
                                </div>
                            </ng-container>

                            <ng-container *ngIf="conditionTypeValue === 1">
                                <div class="mt-8">
                                    <div class="mt-3 text_1xl w-full font-bold truncate" style="position: relative; bottom: 13px !important;">Upgrade</div>
                                    <mat-form-field class="fuse-mat-no-subscript w-1/4 mr-4">
                                        <mat-label>Min Point</mat-label>
                                        <!-- <mat-icon matPrefix
                                                  class="hidden sm:flex icon-size-5"
                                                  [svgIcon]="'heroicons_outline:currency-dollar'"></mat-icon> -->
                                        <input matInput type="number"
                                               [formControlName]="'min_point'"
                                               [placeholder]="'Min Point'">
                                    </mat-form-field>
    
                                    <mat-form-field class="fuse-mat-no-subscript w-1/4">
                                        <mat-label>Max Point</mat-label>
                                        <!-- <mat-icon matPrefix
                                                  class="hidden sm:flex icon-size-5"
                                                  [svgIcon]="'heroicons_outline:currency-dollar'"></mat-icon> -->
                                        <input matInput type="number"
                                               [formControlName]="'max_point'"
                                               [placeholder]="'Max Point'">
                                    </mat-form-field>
                                </div>

                                <mat-form-field class="fuse-mat-no-subscript w-full hidden">
                                    <input matInput readonly style="cursor:pointer;"
                                           [formControlName]="'tier_upgrade_items'">
                                </mat-form-field>
    
                                <div class="mt-3 text_1xl w-full font-bold truncate" style="position: relative; top: 15px !important;">Upgrade Items</div>
                                <div class="mt-8">
                                    <label>Tier Upgrade Item</label>
                                    <ng-container *ngIf="selectedUpgradeItem.length === 0">
                                        <div class="mt-3 h-12" style="cursor: pointer; border: 1px solid #ccc; border-radius: 6px; padding: 10px;">
                                            <span style="color:#ccc;">Create Tier Upgrade Item</span>
                                        </div>
                                    </ng-container>
                                    <ng-container *ngIf="selectedUpgradeItem.length > 0">
                                        <ng-container *ngFor="let item of selectedUpgradeItem; trackBy: trackByFn">
                                            <div (click)="setTierUpgradeEditForm(item.id)" class="mt-3 h-12 membertier_upgrade">
                                                <span [matTooltip]="'Edit Item'" style="position: relative;left: 15px;">
                                                    {{item.item_number}}
                                                </span>
    
                                                <button mat-icon-button
                                                    class="delete_tierupgrade_item_btn"
                                                    [matTooltip]="'Delete'"
                                                    (click)="deleteTierUpgradeItem(item.id)">
                                                    <mat-icon class="text-white"
                                                        [svgIcon]="'heroicons_outline:x'"></mat-icon>
                                                </button>
                                            </div>
                                        </ng-container>
                                    </ng-container>
                                </div>
    
                                <div class="mt-4">
                                    <button class="w-1/8"
                                            mat-stroked-button
                                            [matTooltip]="'Create Tire Upgrade Item'"
                                            (click)="openTierUpgradeForm()">
                                        <mat-icon [svgIcon]="'heroicons_outline:plus'"></mat-icon>
                                        <span class="ml-2 mr-1">Add</span>
                                    </button>
                                </div>
                            </ng-container>

                            <div class="flex sm:items-center mt-3">
                                <div class="w-full text_1xl font-bold" style="position: relative; top: 12px !important;">Downgrade</div>
                            </div>

                            <div class="mt-8">
                                <mat-form-field class="fuse-mat-no-subscript w-full">
                                    <mat-label>Downgrade Condition Type</mat-label>
                                    <mat-select [formControlName]="'downgrade_condition_type'" [(ngModel)]="downgradeconditionValue">
                                        <mat-option [value]="0">Never</mat-option>
                                        <mat-option [value]="1">Main Condition</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>

                            <ng-container *ngIf="downgradeconditionValue === 1">
                                <div class="mt-8">
                                    <mat-form-field class="fuse-mat-no-subscript w-full">
                                        <mat-label>Downgrade Condition Period</mat-label>
                                        <mat-select [formControlName]="'downgrade_condition_period'" [(ngModel)]="downgradeConditionPeriodTypeValue">
                                            <mat-option [value]="0">None</mat-option>
                                            <mat-option [value]="1">Days</mat-option>
                                            <mat-option [value]="2">Months</mat-option>
                                            <mat-option [value]="3">Years</mat-option>
                                        </mat-select>
                                    </mat-form-field>
                                </div>

                                <div class="mt-8">
                                    <mat-form-field class="fuse-mat-no-subscript w-full">
                                        <mat-label>Downgrade Condition Period Value</mat-label>
                                        <mat-icon matPrefix
                                                  class="hidden sm:flex icon-size-5"
                                                  [svgIcon]="'heroicons_outline:currency-dollar'"></mat-icon>
                                        <input matInput type="number"
                                               [formControlName]="'downgrade_condition_period_value'"
                                               [placeholder]="'Downgrade Condition Period Value'">
                                    </mat-form-field>
                                </div>
                            </ng-container>

                            <div class="flex items-center mt-10 -mx-6 sm:-mx-12 py-4 pr-4 pl-1 sm:pr-12 sm:pl-7 border-t bg-gray-50 dark:bg-transparent">
                                <button class="ml-2" style="width: 6rem;"
                                        mat-flat-button
                                        [disabled]="memberTierAddForm.invalid"
                                        [color]="'primary'"
                                        [matTooltip]="'Save'"
                                        (click)="updateMemberTier()">
                                    Save
                                </button>

                                <div class="ml-4">
                                    <ng-container *ngIf="canDelete">
                                        <button style="width: 6rem;"
                                                mat-raised-button
                                                color = "warn"
                                                [matTooltip]="'Delete'"
                                                (click)="DeleteDrawer(memberTier.id)"
                                                >
                                                Delete
                                            </button>
                                    </ng-container>

                                    <ng-container *ngIf="!canDelete">
                                    </ng-container>
                                </div>

                                <div *ngIf="catchErrorMessage" style="position: relative; left: 1rem; color: red;">
                                    {{ catchErrorMessage }}
                                </div>
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </ng-container>

    </mat-drawer-content>

</mat-drawer-container>

